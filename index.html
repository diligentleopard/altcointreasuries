<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Altcoin Treasuries Tracker - Institutional Holdings</title>
    <meta name="description" content="Track institutional holdings of altcoins like Solana (SOL) and Hyperliquid (HPL). Discover which public companies hold altcoins in their treasuries.">
    <meta name="keywords" content="altcoin treasuries, solana holdings, hyperliquid holdings, crypto treasuries, institutional crypto">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inconsolata:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/js-yaml/4.1.0/js-yaml.min.js"></script>
    <style>
        :root {
            --primary: #9945FF;
            --secondary: #00C1DE;
            --dark: #0f0c29;
            --darker: #09061a;
            --success: #14F195;
            --border: #2d2b42;
            --card-bg: #17152c;
            --table-header: #1e1c36;
            --editor-bg: #1a1830;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inconsolata', monospace;
        }
        
        body {
            background: linear-gradient(135deg, var(--darker) 0%, var(--dark) 100%);
            color: #e0e0ff;
            line-height: 1.6;
            min-height: 100vh;
            font-size: 16px;
        }
        
        /* Header Styles */
        header {
            background: rgba(15, 12, 41, 0.9);
            backdrop-filter: blur(10px);
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4);
            border-bottom: 1px solid var(--border);
        }
        
        .header-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }
        
        .logo-icon {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .logo-icon i {
            font-size: 1.2rem;
            color: white;
        }
        
        .logo h1 {
            font-size: 1.5rem;
            font-weight: 700;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        
        nav ul {
            display: flex;
            list-style: none;
            gap: 1.8rem;
        }
        
        nav a {
            color: #b8b8d9;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s;
            font-size: 0.95rem;
            position: relative;
            padding: 0.5rem 0;
        }
        
        nav a:hover, nav a.active {
            color: white;
        }
        
        nav a::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            transition: width 0.3s;
        }
        
        nav a:hover::after, nav a.active::after {
            width: 100%;
        }
        
        nav a.disabled {
            color: #6c757d !important;
            cursor: not-allowed;
            opacity: 0.6;
        }
        
        nav a.disabled::after {
            display: none;
        }
        
        /* Stats Bar */
        .stats-bar {
            background: rgba(23, 21, 44, 0.8);
            backdrop-filter: blur(5px);
            color: white;
            padding: 1rem 0;
            border-bottom: 1px solid var(--border);
        }
        
        .stats-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
        }
        
        .stat-item {
            display: flex;
            flex-direction: column;
            gap: 0.3rem;
        }
        
        .stat-label {
            font-size: 0.85rem;
            color: #a0a0d0;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .stat-value {
            font-size: 1.3rem;
            font-weight: 600;
            color: white;
        }
        
        .sol-stat .stat-value {
            color: var(--primary);
        }
        
        .hpl-stat .stat-value {
            color: var(--secondary);
        }
        
        /* Main Content */
        .container {
            max-width: 1400px;
            margin: 2.5rem auto;
            padding: 0 2rem;
        }
        
        .section-header {
            margin-bottom: 1.8rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1.5rem;
        }
        
        .section-title {
            font-size: 1.8rem;
            font-weight: 700;
            color: white;
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .section-title i {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        
        .controls {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }
        
        .view-toggle {
            display: flex;
            background: var(--card-bg);
            border-radius: 8px;
            overflow: hidden;
            border: 1px solid var(--border);
        }
        
        .view-btn {
            padding: 0.6rem 1.2rem;
            background: none;
            border: none;
            color: #a0a0d0;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
        }
        
        .view-btn.active {
            background: rgba(153, 69, 255, 0.2);
            color: white;
        }
        
        .search-box {
            position: relative;
            min-width: 260px;
        }
        
        .search-box input {
            width: 100%;
            padding: 0.7rem 1rem 0.7rem 2.8rem;
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: 0.95rem;
            color: white;
            outline: none;
            font-family: 'Inconsolata', monospace;
        }
        
        .search-box input:focus {
            border-color: var(--primary);
        }
        
        .search-box i {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--gray);
        }
        
        .filter-btn {
            background: var(--card-bg);
            border: 1px solid var(--border);
            padding: 0.7rem 1.2rem;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.95rem;
            color: white;
            transition: all 0.3s;
        }
        
        .filter-btn:hover {
            border-color: var(--primary);
        }
        
        /* Table Styles */
        .table-container {
            background: var(--card-bg);
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            overflow: hidden;
            margin-bottom: 2.5rem;
            border: 1px solid var(--border);
            max-height: 75vh;
            overflow-y: auto;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            min-width: 1000px;
            table-layout: fixed;
        }
        
        thead {
            background-color: var(--table-header);
            border-bottom: 2px solid var(--border);
            position: sticky;
            top: 0;
            z-index: 10;
        }
        
        th {
            padding: 1.1rem 1.2rem;
            text-align: left;
            font-weight: 600;
            color: #b8b8d9;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        td {
            padding: 1.2rem;
            border-bottom: 1px solid var(--border);
            font-size: 0.95rem;
            vertical-align: top;
        }
        
        tr:last-child td {
            border-bottom: none;
        }
        
        tr:hover {
            background: rgba(40, 37, 70, 0.4);
        }
        
        .company-cell {
            display: flex;
            align-items: center;
            gap: 1.2rem;
        }
        
        .company-logo {
            width: 42px;
            height: 42px;
            border-radius: 10px;
            background: linear-gradient(135deg, #1a0939, #0c1c2e);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            font-size: 1.1rem;
            flex-shrink: 0;
            border: 1px solid var(--border);
        }
        
        .company-info {
            display: flex;
            flex-direction: column;
        }
        
        .company-name {
            font-weight: 600;
            color: white;
            font-size: 1.05rem;
        }
        
        .company-ticker {
            background: rgba(153, 69, 255, 0.15);
            color: var(--primary);
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-size: 0.8rem;
            margin-top: 0.3rem;
            display: inline-block;
            width: fit-content;
        }
        
        .coins-cell {
            display: flex;
            flex-wrap: wrap;
            gap: 0.8rem;
            align-items: flex-start;
        }
        
        .coin-badge {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.4rem 0.8rem;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        .sol-badge {
            background: rgba(153, 69, 255, 0.15);
            color: #d0a0ff;
            border: 1px solid rgba(153, 69, 255, 0.4);
        }
        
        .hpl-badge {
            background: rgba(0, 193, 222, 0.15);
            color: #a0e6ff;
            border: 1px solid rgba(0, 193, 222, 0.4);
        }
        
        .eth-badge {
            background: rgba(136, 102, 221, 0.15);
            color: #c0b0ff;
            border: 1px solid rgba(136, 102, 221, 0.4);
        }
        
        .coin-logo {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            font-weight: bold;
        }
        
        .sol-logo {
            background: var(--primary);
            color: white;
        }
        
        .hpl-logo {
            background: var(--secondary);
            color: white;
        }
        
        .eth-logo {
            background: #8a6de9;
            color: white;
        }
        
        .value-cell {
            font-weight: 600;
            color: white;
            white-space: nowrap;
        }
        
        .sol-value {
            color: var(--primary);
        }
        
        .hpl-value {
            color: var(--secondary);
        }
        
        .positive {
            color: var(--success);
        }
        
        .negative {
            color: #ff6b6b;
        }
        
        .nav-cell {
            font-weight: 600;
            font-size: 1.05rem;
            white-space: nowrap;
        }
        
        /* Data Editor */
        .editor-container {
            background: var(--editor-bg);
            border-radius: 12px;
            padding: 2rem;
            margin: 2rem 0;
            border: 1px solid var(--border);
        }
        
        .editor-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }
        
        .editor-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: white;
        }
        
        .editor-buttons {
            display: flex;
            gap: 1rem;
        }
        
        .editor-btn {
            padding: 0.5rem 1.2rem;
            border-radius: 6px;
            border: none;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
            font-family: 'Inconsolata', monospace;
        }
        
        .load-btn {
            background: rgba(0, 193, 222, 0.2);
            color: var(--secondary);
        }
        
        .load-btn:hover {
            background: rgba(0, 193, 222, 0.3);
        }
        
        .save-btn {
            background: rgba(153, 69, 255, 0.2);
            color: var(--primary);
        }
        
        .save-btn:hover {
            background: rgba(153, 69, 255, 0.3);
        }
        
        .data-editor {
            width: 100%;
            min-height: 400px;
            background: var(--darker);
            color: #e0e0ff;
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 1.2rem;
            font-family: 'Inconsolata', monospace;
            font-size: 0.95rem;
            line-height: 1.6;
            resize: vertical;
            outline: none;
        }
        
        .format-toggle {
            display: flex;
            margin-top: 1rem;
            gap: 1rem;
            align-items: center;
        }
        
        .format-label {
            font-size: 0.9rem;
            color: #a0a0d0;
        }
        
        .syntax-help {
            background: rgba(30, 28, 54, 0.5);
            border-radius: 8px;
            padding: 1rem;
            margin-top: 1rem;
            border-left: 3px solid var(--primary);
        }
        
        /* Footer */
        footer {
            background: rgba(9, 6, 26, 0.8);
            backdrop-filter: blur(5px);
            color: white;
            padding: 3rem 0 2rem;
            margin-top: 3rem;
            border-top: 1px solid var(--border);
        }
        
        .footer-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2.5rem;
        }
        
        .footer-col h3 {
            font-size: 1.2rem;
            margin-bottom: 1.5rem;
            position: relative;
            padding-bottom: 0.7rem;
            color: white;
        }
        
        .footer-col h3::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 40px;
            height: 3px;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            border-radius: 3px;
        }
        
        .footer-col p {
            color: #a0a0d0;
            margin-bottom: 1.2rem;
            line-height: 1.7;
        }
        
        .footer-col ul {
            list-style: none;
        }
        
        .footer-col ul li {
            margin-bottom: 0.8rem;
        }
        
        .footer-col ul li a {
            color: #a0a0d0;
            text-decoration: none;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 0.7rem;
        }
        
        .footer-col ul li a:hover {
            color: var(--primary);
        }
        
        .social-links {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
        }
        
        .social-links a {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: var(--card-bg);
            color: #a0a0d0;
            transition: all 0.3s;
        }
        
        .social-links a:hover {
            background: var(--primary);
            color: white;
            transform: translateY(-3px);
        }
        
        .copyright {
            text-align: center;
            padding-top: 2.5rem;
            margin-top: 2.5rem;
            border-top: 1px solid rgba(255,255,255,0.08);
            color: #6c757d;
            font-size: 0.9rem;
        }
        
        /* Responsive */
        @media (max-width: 1100px) {
            .header-container, .stats-container, .container, .footer-container {
                padding: 0 1.5rem;
            }
        }
        
        @media (max-width: 900px) {
            .section-header {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .controls {
                width: 100%;
            }
            
            .search-box {
                flex-grow: 1;
            }
        }
        
        @media (max-width: 768px) {
            nav ul {
                gap: 1rem;
                flex-wrap: wrap;
            }
            
            .stats-container {
                grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
                gap: 1.2rem;
            }
            
            .stat-value {
                font-size: 1.1rem;
            }
            
            .footer-container {
                gap: 2rem;
            }
            
            .table-container {
                max-height: 65vh;
            }
            
            .editor-header {
                flex-direction: column;
                gap: 1rem;
                align-items: flex-start;
            }
            
            .editor-buttons {
                flex-wrap: wrap;
            }
        }
        
        @media (max-width: 480px) {
            .view-toggle {
                width: 100%;
            }
            
            .view-btn {
                flex-grow: 1;
                text-align: center;
                padding: 0.6rem;
                font-size: 0.85rem;
            }
            
            .filter-btn {
                padding: 0.7rem 1rem;
            }
            
            .format-toggle {
                flex-direction: column;
                align-items: flex-start;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="header-container">
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-coins"></i>
                </div>
                <h1>Altcoin <span>Treasuries</span></h1>
            </div>
            <nav>
                <ul>
                    <li><a href="#" class="active">Dashboard</a></li>
                    <li><a href="#">Public Companies</a></li>
                    <li><a href="#" class="disabled">VC Funds</a></li>
                    <li><a href="#" class="disabled">ETFs & Trusts</a></li>
                    <li><a href="#" class="disabled">Crypto Funds</a></li>
                    <li><a href="#">Methodology</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Stats Bar -->
    <div class="stats-bar">
        <div class="stats-container">
            <div class="stat-item sol-stat">
                <div class="stat-label">
                    <i class="fas fa-chart-line"></i>
                    <span>Total SOL Held</span>
                </div>
                <div class="stat-value" id="total-sol">Loading...</div>
            </div>
            <div class="stat-item hpl-stat">
                <div class="stat-label">
                    <i class="fas fa-layer-group"></i>
                    <span>Total HPL Held</span>
                </div>
                <div class="stat-value" id="total-hpl">Loading...</div>
            </div>
            <div class="stat-item">
                <div class="stat-label">
                    <i class="fas fa-building"></i>
                    <span>Entities Tracked</span>
                </div>
                <div class="stat-value" id="entities-tracked">Loading...</div>
            </div>
            <div class="stat-item">
                <div class="stat-label">
                    <i class="fas fa-sync-alt"></i>
                    <span>Last Updated</span>
                </div>
                <div class="stat-value" id="last-updated">Loading...</div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="container">
        <div class="section-header">
            <h2 class="section-title">
                <i class="fas fa-landmark"></i>
                Public Companies Holding Altcoins
            </h2>
            <div class="controls">
                <div class="view-toggle">
                    <button class="view-btn active" id="aggregated-btn">Aggregated View</button>
                    <button class="view-btn" id="split-btn">Split by Coin</button>
                </div>
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="search-input" placeholder="Search companies or tickers...">
                </div>
                <button class="filter-btn" id="show-editor-btn">
                    <i class="fas fa-database"></i>
                    <span>Manage Data</span>
                </button>
            </div>
        </div>

        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Company</th>
                        <th>Coins Held</th>
                        <th>USD Value</th>
                        <th>Market Cap</th>
                        <th>Enterprise Value</th>
                        <th>Crypto / Share</th>
                        <th>mNAV (%)</th>
                    </tr>
                </thead>
                <tbody id="table-body">
                    <!-- Table content will be populated by JavaScript -->
                </tbody>
            </table>
        </div>

        <!-- Data Editor Section -->
        <div class="editor-container" id="editor-container" style="display: none;">
            <div class="editor-header">
                <h3 class="editor-title">Manage Company Data</h3>
                <div class="editor-buttons">
                    <button class="editor-btn load-btn" id="load-default-btn">
                        <i class="fas fa-download"></i> Load Default
                    </button>
                    <button class="editor-btn save-btn" id="save-btn">
                        <i class="fas fa-save"></i> Save & Apply
                    </button>
                    <button class="editor-btn" id="toggle-format-btn">
                        <i class="fas fa-exchange-alt"></i> Switch to YAML
                    </button>
                </div>
            </div>
            
            <div class="format-toggle">
                <span class="format-label">Editing Format:</span>
                <div class="view-toggle">
                    <button class="view-btn active" id="json-format-btn">JSON</button>
                    <button class="view-btn" id="yaml-format-btn">YAML</button>
                </div>
            </div>
            
            <textarea class="data-editor" id="data-editor"></textarea>
            
            <div class="syntax-help" id="json-help">
                <h4>JSON Syntax Tips:</h4>
                <ul>
                    <li>Always use double quotes around keys and string values</li>
                    <li>Commas separate items in objects and arrays</li>
                    <li>No trailing commas allowed</li>
                    <li>Use proper nesting with curly braces {} and brackets []</li>
                </ul>
            </div>
            
            <div class="syntax-help" id="yaml-help" style="display: none;">
                <h4>YAML Syntax Tips:</h4>
                <ul>
                    <li>Use consistent 2-space indentation</li>
                    <li>Strings don't need quotes unless they contain special characters</li>
                    <li>Lists start with hyphens (-)</li>
                    <li>Keys and values separated by colons (:)</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="footer-container">
            <div class="footer-col">
                <h3>Altcoin Treasuries</h3>
                <p>Tracking institutional altcoin holdings with a focus on Solana and Hyperliquid ecosystems. Providing transparency in the rapidly evolving altcoin market.</p>
                <div class="social-links">
                    <a href="#"><i class="fab fa-twitter"></i></a>
                    <a href="#"><i class="fab fa-github"></i></a>
                    <a href="#"><i class="fab fa-telegram"></i></a>
                    <a href="#"><i class="fab fa-discord"></i></a>
                </div>
            </div>
            <div class="footer-col">
                <h3>Altcoin Categories</h3>
                <ul>
                    <li><a href="#"><i class="fas fa-arrow-right"></i> Solana Ecosystem</a></li>
                    <li><a href="#"><i class="fas fa-arrow-right"></i> Hyperliquid Ecosystem</a></li>
                    <li><a href="#"><i class="fas fa-arrow-right"></i> Layer 1 Protocols</a></li>
                    <li><a href="#"><i class="fas fa-arrow-right"></i> DeFi Tokens</a></li>
                    <li><a href="#"><i class="fas fa-arrow-right"></i> Infrastructure</a></li>
                </ul>
            </div>
            <div class="footer-col">
                <h3>Resources</h3>
                <ul>
                    <li><a href="#"><i class="fas fa-arrow-right"></i> Methodology</a></li>
                    <li><a href="#"><i class="fas fa-arrow-right"></i> API Access</a></li>
                    <li><a href="#"><i class="fas fa-arrow-right"></i> Market Reports</a></li>
                    <li><a href="#"><i class="fas fa-arrow-right"></i> Research Papers</a></li>
                    <li><a href="#"><i class="fas fa-arrow-right"></i> Data Sources</a></li>
                </ul>
            </div>
            <div class="footer-col">
                <h3>Legal & Compliance</h3>
                <ul>
                    <li><a href="#"><i class="fas fa-arrow-right"></i> Terms of Service</a></li>
                    <li><a href="#"><i class="fas fa-arrow-right"></i> Privacy Policy</a></li>
                    <li><a href="#"><i class="fas fa-arrow-right"></i> Disclaimer</a></li>
                    <li><a href="#"><i class="fas fa-arrow-right"></i> Regulatory Information</a></li>
                </ul>
            </div>
        </div>
        <div class="copyright">
            &copy; 2025 Altcoin Treasuries Tracker. All data provided for informational purposes only. Not financial advice.
        </div>
    </footer>

    <script>
        // DOM Elements
        const tableBody = document.getElementById('table-body');
        const searchInput = document.getElementById('search-input');
        const aggregatedBtn = document.getElementById('aggregated-btn');
        const splitBtn = document.getElementById('split-btn');
        const showEditorBtn = document.getElementById('show-editor-btn');
        const editorContainer = document.getElementById('editor-container');
        const dataEditor = document.getElementById('data-editor');
        const loadDefaultBtn = document.getElementById('load-default-btn');
        const saveBtn = document.getElementById('save-btn');
        const toggleFormatBtn = document.getElementById('toggle-format-btn');
        const jsonFormatBtn = document.getElementById('json-format-btn');
        const yamlFormatBtn = document.getElementById('yaml-format-btn');
        const jsonHelp = document.getElementById('json-help');
        const yamlHelp = document.getElementById('yaml-help');
        const totalSolElement = document.getElementById('total-sol');
        const totalHplElement = document.getElementById('total-hpl');
        const entitiesTrackedElement = document.getElementById('entities-tracked');
        const lastUpdatedElement = document.getElementById('last-updated');
        
        // View state
        let currentView = 'aggregated';
        let companies = [];
        let filteredCompanies = [];
        let currentDataFormat = 'json'; // 'json' or 'yaml'
        
        // Default JSON data
        const defaultJsonData = JSON.stringify({
            companies: [
                {
                    id: 1,
                    rank: 1,
                    name: "Solana Ventures",
                    ticker: "SOLV",
                    logo: "SV",
                    country: "USA",
                    marketCap: "8.15B",
                    enterpriseValue: "7.92B",
                    cryptoPerShare: {
                        coin: "SOL",
                        amount: 12.4
                    },
                    mNAV: 42.3,
                    holdings: [
                        { coin: "SOL", amount: "2,481,295", value: "2.1B" },
                        { coin: "HPL", amount: "4,872,100", value: "1.32B" }
                    ]
                },
                {
                    id: 2,
                    rank: 2,
                    name: "HyperLiquid Fund",
                    ticker: "HYPR",
                    logo: "HF",
                    country: "Cayman Islands",
                    marketCap: "5.32B",
                    enterpriseValue: "5.11B",
                    cryptoPerShare: {
                        coin: "HPL",
                        amount: 84.2
                    },
                    mNAV: 38.7,
                    holdings: [
                        { coin: "HPL", amount: "8,192,477", value: "2.2B" },
                        { coin: "SOL", amount: "1,028,500", value: "0.67B" }
                    ]
                },
                {
                    id: 3,
                    rank: 3,
                    name: "Crypto Wealth Inc",
                    ticker: "CRYP",
                    logo: "CW",
                    country: "USA",
                    marketCap: "4.15B",
                    enterpriseValue: "3.97B",
                    cryptoPerShare: {
                        coin: "SOL",
                        amount: 8.7
                    },
                    mNAV: 28.5,
                    holdings: [
                        { coin: "SOL", amount: "1,267,800", value: "0.83B" },
                        { coin: "ETH", amount: "42,800", value: "0.15B" },
                        { coin: "HPL", amount: "3,127,500", value: "0.94B" }
                    ]
                },
                {
                    id: 4,
                    rank: 4,
                    name: "NextWave Capital",
                    ticker: "NWAV",
                    logo: "NW",
                    country: "Singapore",
                    marketCap: "2.75B",
                    enterpriseValue: "2.62B",
                    cryptoPerShare: {
                        coin: "HPL",
                        amount: 32.5
                    },
                    mNAV: 21.8,
                    holdings: [
                        { coin: "HPL", amount: "2,280,314", value: "1.18B" }
                    ]
                },
                {
                    id: 5,
                    rank: 5,
                    name: "SolTech Group",
                    ticker: "SOLT",
                    logo: "ST",
                    country: "USA",
                    marketCap: "3.28B",
                    enterpriseValue: "3.15B",
                    cryptoPerShare: {
                        coin: "SOL",
                        amount: 6.4
                    },
                    mNAV: 18.2,
                    holdings: [
                        { coin: "SOL", amount: "846,200", value: "1.05B" }
                    ]
                },
                {
                    id: 6,
                    rank: 6,
                    name: "Digital Assets Ltd",
                    ticker: "DIGA",
                    logo: "DA",
                    country: "UK",
                    marketCap: "1.85B",
                    enterpriseValue: "1.72B",
                    cryptoPerShare: {
                        coin: "HPL",
                        amount: 21.4
                    },
                    mNAV: -3.2,
                    holdings: [
                        { coin: "HPL", amount: "1,500,000", value: "0.68B" },
                        { coin: "ETH", amount: "18,200", value: "0.102B" }
                    ]
                },
                {
                    id: 7,
                    rank: 7,
                    name: "Blockchain Holdings",
                    ticker: "BCHL",
                    logo: "BH",
                    country: "Switzerland",
                    marketCap: "3.75B",
                    enterpriseValue: "3.62B",
                    cryptoPerShare: {
                        coin: "SOL",
                        amount: 5.2
                    },
                    mNAV: 15.6,
                    holdings: [
                        { coin: "SOL", amount: "1,250,000", value: "1.55B" },
                        { coin: "HPL", amount: "1,800,000", value: "0.92B" }
                    ]
                },
                {
                    id: 8,
                    rank: 8,
                    name: "Crypto Innovators",
                    ticker: "CRIN",
                    logo: "CI",
                    country: "USA",
                    marketCap: "1.42B",
                    enterpriseValue: "1.38B",
                    cryptoPerShare: {
                        coin: "HPL",
                        amount: 18.7
                    },
                    mNAV: 8.9,
                    holdings: [
                        { coin: "HPL", amount: "1,200,000", value: "0.64B" },
                        { coin: "SOL", amount: "420,000", value: "0.55B" }
                    ]
                }
            ]
        }, null, 2);

        // Helper functions
        function getCoinClass(coin) {
            const coinClasses = {
                'SOL': 'sol-badge',
                'HPL': 'hpl-badge',
                'ETH': 'eth-badge'
            };
            return coinClasses[coin] || 'sol-badge';
        }
        
        function getCoinLogoClass(coin) {
            const logoClasses = {
                'SOL': 'sol-logo',
                'HPL': 'hpl-logo',
                'ETH': 'eth-logo'
            };
            return logoClasses[coin] || 'sol-logo';
        }
        
        function formatValue(value) {
            if (value >= 1e9) {
                return '$' + (value / 1e9).toFixed(2) + 'B';
            } else if (value >= 1e6) {
                return '$' + (value / 1e6).toFixed(2) + 'M';
            } else {
                return '$' + value.toFixed(2);
            }
        }
        
        function parseValue(valueStr) {
            // Handle both "1.5B" and "$1.5B" formats
            const cleanStr = valueStr.replace(/[$,]/g, '');
            const value = parseFloat(cleanStr.replace(/[^\d.]/g, ''));
            
            if (cleanStr.includes('B') || valueStr.includes('B')) {
                return value * 1e9;
            } else if (cleanStr.includes('M') || valueStr.includes('M')) {
                return value * 1e6;
            }
            return value;
        }
        
        function calculateTotalValue(holdings) {
            return holdings.reduce((total, holding) => {
                return total + parseValue(holding.value);
            }, 0);
        }
        
        function calculateAggregateHoldings() {
            let totalSol = 0;
            let totalHpl = 0;
            let totalEntities = companies.length;
            
            companies.forEach(company => {
                company.holdings.forEach(holding => {
                    const amount = parseFloat(holding.amount.replace(/,/g, ''));
                    if (holding.coin === 'SOL') totalSol += amount;
                    if (holding.coin === 'HPL') totalHpl += amount;
                });
            });
            
            // Format numbers with commas
            totalSol = totalSol.toLocaleString();
            totalHpl = totalHpl.toLocaleString();
            
            // Update stats bar
            totalSolElement.textContent = `${totalSol} SOL`;
            totalHplElement.textContent = `${totalHpl} HPL`;
            entitiesTrackedElement.textContent = totalEntities;
            lastUpdatedElement.textContent = new Date().toLocaleDateString('en-US', { 
                year: 'numeric', 
                month: 'short', 
                day: 'numeric' 
            });
        }
        
        // Render functions
        function renderAggregatedView() {
            tableBody.innerHTML = '';
            
            filteredCompanies.forEach(company => {
                const totalValue = calculateTotalValue(company.holdings);
                const formattedValue = formatValue(totalValue);
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${company.rank}</td>
                    <td>
                        <div class="company-cell">
                            <div class="company-logo">${company.logo}</div>
                            <div class="company-info">
                                <div class="company-name">${company.name}</div>
                                <div class="company-ticker">${company.ticker}</div>
                            </div>
                        </div>
                    </td>
                    <td class="coins-cell">
                        ${company.holdings.map(holding => `
                            <div class="coin-badge ${getCoinClass(holding.coin)}">
                                <div class="coin-logo ${getCoinLogoClass(holding.coin)}">${holding.coin.charAt(0)}</div>
                                <span>${holding.coin}: ${holding.amount}</span>
                            </div>
                        `).join('')}
                    </td>
                    <td class="value-cell">${formattedValue}</td>
                    <td class="value-cell">${company.marketCap}</td>
                    <td class="value-cell">${company.enterpriseValue}</td>
                    <td class="value-cell ${getCoinClass(company.cryptoPerShare.coin)}">
                        ${company.cryptoPerShare.amount} ${company.cryptoPerShare.coin}
                    </td>
                    <td class="nav-cell ${company.mNAV >= 0 ? 'positive' : 'negative'}">
                        ${company.mNAV >= 0 ? '+' : ''}${company.mNAV}%
                    </td>
                `;
                
                tableBody.appendChild(row);
            });
        }
        
        function renderSplitView() {
            tableBody.innerHTML = '';
            
            filteredCompanies.forEach(company => {
                company.holdings.forEach((holding, index) => {
                    const row = document.createElement('tr');
                    
                    const companyInfo = index === 0 ? `
                        <td rowspan="${company.holdings.length}">${company.rank}</td>
                        <td rowspan="${company.holdings.length}">
                            <div class="company-cell">
                                <div class="company-logo">${company.logo}</div>
                                <div class="company-info">
                                    <div class="company-name">${company.name}</div>
                                    <div class="company-ticker">${company.ticker}</div>
                                </div>
                            </div>
                        </td>
                    ` : '';
                    
                    row.innerHTML = `
                        ${companyInfo}
                        <td class="coins-cell">
                            <div class="coin-badge ${getCoinClass(holding.coin)}">
                                <div class="coin-logo ${getCoinLogoClass(holding.coin)}">${holding.coin.charAt(0)}</div>
                                <span>${holding.coin}: ${holding.amount}</span>
                            </div>
                        </td>
                        <td class="value-cell">${holding.value}</td>
                        ${index === 0 ? `
                            <td class="value-cell" rowspan="${company.holdings.length}">${company.marketCap}</td>
                            <td class="value-cell" rowspan="${company.holdings.length}">${company.enterpriseValue}</td>
                            <td class="value-cell ${getCoinClass(company.cryptoPerShare.coin)}" rowspan="${company.holdings.length}">
                                ${company.cryptoPerShare.amount} ${company.cryptoPerShare.coin}
                            </td>
                            <td class="nav-cell ${company.mNAV >= 0 ? 'positive' : 'negative'}" rowspan="${company.holdings.length}">
                                ${company.mNAV >= 0 ? '+' : ''}${company.mNAV}%
                            </td>
                        ` : ''}
                    `;
                    
                    tableBody.appendChild(row);
                });
            });
        }
        
        function filterCompanies(searchTerm) {
            if (!searchTerm) {
                filteredCompanies = [...companies];
            } else {
                const term = searchTerm.toLowerCase();
                filteredCompanies = companies.filter(company => 
                    company.name.toLowerCase().includes(term) ||
                    company.ticker.toLowerCase().includes(term) ||
                    (company.country && company.country.toLowerCase().includes(term))
                );
            }
            
            if (currentView === 'aggregated') {
                renderAggregatedView();
            } else {
                renderSplitView();
            }
        }
        
        function loadCompaniesFromJson(jsonData) {
            try {
                const data = JSON.parse(jsonData);
                
                // Validate the structure
                if (!data || !Array.isArray(data.companies)) {
                    throw new Error("Invalid data structure: 'companies' array not found");
                }
                
                companies = data.companies.map(company => {
                    // Ensure all required fields exist
                    return {
                        id: company.id || 0,
                        rank: company.rank || 0,
                        name: company.name || "Unknown Company",
                        ticker: company.ticker || "N/A",
                        logo: company.logo || "??",
                        country: company.country || "",
                        marketCap: company.marketCap || "N/A",
                        enterpriseValue: company.enterpriseValue || "N/A",
                        cryptoPerShare: company.cryptoPerShare || { coin: "N/A", amount: 0 },
                        mNAV: company.mNAV || 0,
                        holdings: company.holdings || []
                    };
                });
                
                filteredCompanies = [...companies];
                
                // Update stats
                calculateAggregateHoldings();
                
                // Re-render view
                if (currentView === 'aggregated') {
                    renderAggregatedView();
                } else {
                    renderSplitView();
                }
                
                return true;
            } catch (error) {
                console.error('JSON Parsing Error:', error);
                alert(`Error parsing JSON data: ${error.message}\n\nCheck your JSON syntax and structure.`);
                return false;
            }
        }
        
        function loadCompaniesFromYaml(yamlData) {
            try {
                const data = jsyaml.load(yamlData);
                return loadCompaniesFromJson(JSON.stringify(data));
            } catch (error) {
                console.error('YAML Parsing Error:', error);
                alert(`Error parsing YAML data: ${error.message}\n\nCheck your YAML syntax and structure.`);
                return false;
            }
        }
        
        function toggleDataFormat(format) {
            currentDataFormat = format;
            
            // Update UI
            jsonFormatBtn.classList.toggle('active', format === 'json');
            yamlFormatBtn.classList.toggle('active', format === 'yaml');
            jsonHelp.style.display = format === 'json' ? 'block' : 'none';
            yamlHelp.style.display = format === 'yaml' ? 'block' : 'none';
            
            // Update button text
            toggleFormatBtn.innerHTML = format === 'json' ? 
                '<i class="fas fa-exchange-alt"></i> Switch to YAML' : 
                '<i class="fas fa-exchange-alt"></i> Switch to JSON';
            
            // Convert existing data to the new format
            if (companies.length > 0) {
                updateEditorContent();
            }
        }
        
        function updateEditorContent() {
            if (currentDataFormat === 'json') {
                // Display as JSON
                dataEditor.value = JSON.stringify({ companies }, null, 2);
            } else {
                // Display as YAML
                try {
                    dataEditor.value = jsyaml.dump({ companies });
                } catch (error) {
                    console.error('Error converting to YAML:', error);
                    dataEditor.value = "Error: Could not convert data to YAML format";
                }
            }
        }
        
        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            // Load default data
            loadCompaniesFromJson(defaultJsonData);
            
            // Set up event listeners
            searchInput.addEventListener('input', function() {
                filterCompanies(this.value.toLowerCase());
            });
            
            aggregatedBtn.addEventListener('click', function() {
                currentView = 'aggregated';
                aggregatedBtn.classList.add('active');
                splitBtn.classList.remove('active');
                renderAggregatedView();
            });
            
            splitBtn.addEventListener('click', function() {
                currentView = 'split';
                splitBtn.classList.add('active');
                aggregatedBtn.classList.remove('active');
                renderSplitView();
            });
            
            showEditorBtn.addEventListener('click', function() {
                const isVisible = editorContainer.style.display === 'block';
                editorContainer.style.display = isVisible ? 'none' : 'block';
                showEditorBtn.innerHTML = isVisible ? 
                    '<i class="fas fa-database"></i><span>Manage Data</span>' : 
                    '<i class="fas fa-times"></i><span>Hide Editor</span>';
                
                // Load current data into editor when shown
                if (!isVisible) {
                    updateEditorContent();
                }
            });
            
            loadDefaultBtn.addEventListener('click', function() {
                if (confirm('Load default data? This will overwrite your current data.')) {
                    dataEditor.value = defaultJsonData;
                    loadCompaniesFromJson(defaultJsonData);
                    toggleDataFormat('json');
                }
            });
            
            saveBtn.addEventListener('click', function() {
                try {
                    if (currentDataFormat === 'json') {
                        loadCompaniesFromJson(dataEditor.value);
                    } else {
                        loadCompaniesFromYaml(dataEditor.value);
                    }
                    alert('Data applied successfully!');
                    
                    // Save to localStorage for persistence
                    try {
                        localStorage.setItem('altcoinTreasuriesData', dataEditor.value);
                        localStorage.setItem('altcoinTreasuriesFormat', currentDataFormat);
                    } catch (e) {
                        console.log('Local storage not available');
                    }
                } catch (error) {
                    alert(`Failed to apply data: ${error.message}`);
                }
            });
            
            jsonFormatBtn.addEventListener('click', function() {
                toggleDataFormat('json');
                updateEditorContent();
            });
            
            yamlFormatBtn.addEventListener('click', function() {
                toggleDataFormat('yaml');
                updateEditorContent();
            });
            
            toggleFormatBtn.addEventListener('click', function() {
                const newFormat = currentDataFormat === 'json' ? 'yaml' : 'json';
                toggleDataFormat(newFormat);
                updateEditorContent();
            });
            
            // Try to load from localStorage
            const savedData = localStorage.getItem('altcoinTreasuriesData');
            const savedFormat = localStorage.getItem('altcoinTreasuriesFormat');
            
            if (savedData) {
                try {
                    if (savedFormat === 'json') {
                        loadCompaniesFromJson(savedData);
                    } else {
                        loadCompaniesFromYaml(savedData);
                    }
                    toggleDataFormat(savedFormat || 'json');
                    dataEditor.value = savedData;
                } catch (error) {
                    console.error('Error loading saved data:', error);
                    loadCompaniesFromJson(defaultJsonData);
                }
            } else {
                toggleDataFormat('json');
            }
        });
    </script>
</body>
</html>